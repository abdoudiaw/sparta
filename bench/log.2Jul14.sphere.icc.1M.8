SPARTA (5 Dec 2013)
# flow around a sphere on a uniform grid
# particles are created initially and input at boundaries at stream velocity

variable            x index 10
variable            y index 10
variable            z index 10

variable            n equal 10*$x*$y*$z
variable            n equal 10*40*$y*$z
variable            n equal 10*40*50*$z
variable            n equal 10*40*50*50
variable            fnum equal 7.33e+21/v_n

seed	    	    12345
dimension   	    3
global              nrho 7.03E18
global              fnum ${fnum}
global              fnum 7.33e+15
timestep 	    1.E-5
global              gridcut 0.1
global              surfmax 500

boundary	    o o o
create_box          -5.0 5.0 -5.0 5.0 -5.0 5.0
Created orthogonal box = (-5 -5 -5) to (5 5 5)
create_grid         $x $y $z
create_grid         40 $y $z
create_grid         40 50 $z
create_grid         40 50 50
Created 100000 child grid cells
  parent cells = 1
  CPU time = 0.00676394 secs
  create/ghost percent = 86.8735 13.1265

balance_grid        rcb cell
Balance grid migrated 87500 cells
  CPU time = 0.0400031 secs
  reassign/sort/migrate/ghost percent = 11.7394 0.967309 26.5131 60.7802

species		    ../data/ar.species Ar

mixture             air Ar frac 1.0
mixture 	    air group species
mixture             air Ar vstream 2500.0 0.0 0.0 temp 300.00

fix		    in inflow air all

collide		    vss air ../data/ar.vss

read_surf	    1 sdata.sphere
  602 points
  1200 triangles
  -1 1 xlo xhi
  -1 1 ylo yhi
  -1 1 zlo zhi
  0.100631 min triangle edge length
  0.00439601 min triangle area
  400 = cells with surfs
  4040 = total surfs in all grid cells
  22 = max surfs in one grid cell
  0.402525 = min surf-size/cell-size ratio
  99360 240 400 = cells outside/inside/overlapping surfs
  400 = surf cells with 1,2,etc splits
  995.862 995.862 = cell-wise and global flow volume
  CPU time = 0.0224152 secs
  read/surf2grid/error/ghost/inout percent = 7.00413 10.0557 11.3896 61.7757 9.77493
surf_collide	    1 diffuse 300.0 1.0
surf_modify         collide 1 1

create_particles    air n 0
Created 955103 particles
  CPU time = 0.0246141 secs

fix                 3 balance 100 1.1 rcb mol
collide_modify      vremax 100 yes

#compute             1 grid all ndensity mass u v w
#fix                 1 ave/grid 10 100 1000 c_1 ave running
#dump                1 grid 1000 tmp_flow.* id xc yc zc f_1

#compute             2 surf all press ke
#fix		    2 ave/surf 10 100 1000 c_2 ave running
#dump                2 surf 1000 tmp_surf.* id f_2

compute             g grid all n
compute             max reduce max c_g[1]

stats_style	    step cpu np nattempt ncoll nscoll c_max
stats		    100

# equilibrate flow for 1000 steps
# then benchmark for 1000 steps

run 		    1000
Memory usage per proc in Mbytes:
  particles (ave,min,max) = 12.3596 12.3596 12.3596
  grid      (ave,min,max) = 3.89107 3.89107 3.89107
  surf      (ave,min,max) = 0.0601273 0.0601273 0.0601273
  total     (ave,min,max) = 16.4062 16.4062 16.4062
Step CPU Np Natt Ncoll Nscoll max 
       0            0   955103        0        0        0           11 
     100     1.422919   953981      327      288      112           67 
     200     2.932117   954955      387      344      122           69 
     300    4.4614859   961896      444      393      105           63 
     400    5.9913239   976308      465      426      100           66 
     500     7.488477   991515      491      422      120           68 
     600     9.005918   996761      501      442      137           81 
     700    10.517758   998881      489      441      100           69 
     800    12.093613  1000253      472      428      118           70 
     900    13.645677  1000224      496      441      138           71 
    1000    15.158578   999956      462      417      113           78 
Loop time of 15.1586 on 8 procs for 1000 steps with 999956 particles

Particle moves    = 983876639 (984M)
Cells touched     = 1099087550 (1.1B)
Particle comms    = 2844938 (2.84M)
Boundary collides = 0 (0K)
Boundary exits    = 2734891 (2.73M)
SurfColl checks   = 63759031 (63.8M)
SurfColl occurs   = 113374 (0.113M)
Collide attempts  = 14431262 (14.4M)
Collide occurs    = 11063888 (11.1M)
Particles stuck   = 0

Particle-moves/CPUsec/proc: 8.11318e+06
Particle-moves/step: 983877
Cell-touches/particle/step: 1.1171
Particle comm iterations/step: 1
Particle fraction communicated: 0.00289156
Particle fraction colliding with boundary: 0
Particle fraction exiting boundary: 0.00277971
Surface-checks/particle/step: 0.0648039
Surface-collisions/particle/step: 0.000115232
Collision-attempts/particle/step: 0.0146678
Collisions/particle/step: 0.0112452

Move  time (%) = 7.93285 (52.3322)
Coll  time (%) = 2.02241 (13.3416)
Sort  time (%) = 4.65775 (30.7267)
Comm  time (%) = 0.199715 (1.3175)
Outpt time (%) = 0.041244 (0.272083)
Other time (%) = 0.304658 (2.0098)

Particles: 124994 ave 125840 max 124382 min
Histogram: 3 1 0 0 0 0 1 1 1 1
Cells:      12500 ave 12500 max 12500 min
Histogram: 8 0 0 0 0 0 0 0 0 0
GhostCell: 1696 ave 1696 max 1696 min
Histogram: 8 0 0 0 0 0 0 0 0 0
EmptyCell: 0 ave 0 max 0 min
Histogram: 8 0 0 0 0 0 0 0 0 0
collide_modify      vremax 100 no
run 		    1000
Memory usage per proc in Mbytes:
  particles (ave,min,max) = 13.3896 13.3896 13.3896
  grid      (ave,min,max) = 3.89107 3.89107 3.89107
  surf      (ave,min,max) = 0.0601273 0.0601273 0.0601273
  total     (ave,min,max) = 17.4361 17.4361 17.4361
Step CPU Np Natt Ncoll Nscoll max 
    1000            0   999956      462      417        0           78 
    1100     1.528003  1000518      456      410       97           70 
    1200    3.0526612  1000090      482      428      105           74 
    1300    4.6160681   999791      497      448      126           69 
    1400    6.1206901  1000254      492      438      107           70 
    1500     7.644058  1000852      509      444      120           76 
    1600     9.158056  1000869      482      438      120           74 
    1700    10.668241  1000161      476      437      124           81 
    1800    12.194121  1000273      500      439      122           74 
    1900    13.703239  1000001      491      428      114           66 
    2000    15.212384  1000471      487      439      112           71 
Loop time of 15.2124 on 8 procs for 1000 steps with 1000471 particles

Particle moves    = 1003014157 (1B)
Cells touched     = 1120700130 (1.12B)
Particle comms    = 2908454 (2.91M)
Boundary collides = 0 (0K)
Boundary exits    = 2778777 (2.78M)
SurfColl checks   = 68497151 (68.5M)
SurfColl occurs   = 118009 (0.118M)
Collide attempts  = 15413053 (15.4M)
Collide occurs    = 11822481 (11.8M)
Particles stuck   = 0

Particle-moves/CPUsec/proc: 8.24173e+06
Particle-moves/step: 1.00301e+06
Cell-touches/particle/step: 1.11733
Particle comm iterations/step: 1
Particle fraction communicated: 0.00289971
Particle fraction colliding with boundary: 0
Particle fraction exiting boundary: 0.00277043
Surface-checks/particle/step: 0.0682913
Surface-collisions/particle/step: 0.000117654
Collision-attempts/particle/step: 0.0153667
Collisions/particle/step: 0.011787

Move  time (%) = 7.83166 (51.482)
Coll  time (%) = 2.11131 (13.8788)
Sort  time (%) = 4.7257 (31.0647)
Comm  time (%) = 0.198714 (1.30626)
Outpt time (%) = 0.0415159 (0.272908)
Other time (%) = 0.303527 (1.99526)

Particles: 125059 ave 125984 max 124273 min
Histogram: 1 3 0 0 0 1 1 0 0 2
Cells:      12500 ave 12500 max 12500 min
Histogram: 8 0 0 0 0 0 0 0 0 0
GhostCell: 1696 ave 1696 max 1696 min
Histogram: 8 0 0 0 0 0 0 0 0 0
EmptyCell: 0 ave 0 max 0 min
Histogram: 8 0 0 0 0 0 0 0 0 0
