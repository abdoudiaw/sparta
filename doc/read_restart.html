<HTML>
<CENTER><A HREF = "http://sparta.sandia.gov">SPARTA WWW Site</A> - <A HREF = "Manual.html">SPARTA Documentation</A> - <A HREF = "Section_commands.html#comm">SPARTA Commands</A> 
</CENTER>






<HR>

<H3>read_restart command 
</H3>
<P><B>Syntax:</B>
</P>
<PRE>read_restart file 
</PRE>
<UL><LI>file = name of binary restart file to read in 
</UL>
<P><B>Examples:</B>
</P>
<PRE>read_restart save.10000
read_restart restart.*
read_restart flow.*.% 
</PRE>
<PRE>
</PRE>
<P><B>Description:</B>
</P>
<P>Read in a previously saved simulation from a restart file.  This
allows continuation of a previous run on the same or different number
of processors.  Information about what is stored in a restart file is
given below.  Basically this operation will re-create the simulation
box with all its particles, the hierarchical grid used to track
particles, and surface elements embedded in the grid, all with their
attributes at the point in time the information was written to the
restart file by a previous simluation.
</P>
<P>Although restart files are saved in binary format to allow exact
regeneration of information, the random numbers used in the continued
run will not be identical to those used if the run had been continued.
Hence the new run will not be identical to the continued original run,
but should be statistically similar.
</P>
<P>If a restarted run is performed on the same number of processors as
the original run, then the assignment of grid cells (and their
particles) to processors will be the same as in the original
simulation.
</P>
<P>IMPORTANT NOTE: Using the <I>gridcut</I> keyword with a cutoff >= 0.0 is
only possible if the grid cells owned by each processor are "clumped"
(by the time the next simulation is performed).  This will be the case
if the <I>clump</I>, <I>block</I>, or <I>rcb</I> option of the
<A HREF = "balance_grid.html">balance_grid</A>, or the <I>rcb</I> option of the <A HREF = "fix_balance.html">fix
balance</A> command is used.  If grid cells are not
clumped, then ghost cells cannot be stored for a <I>gridcut</I> cutoff >=
0.0.  This will generate an error when a simulation is performed.
</P>
<P>IMPORTANT NOTE: The <I>gridcut</I> keyword can be specified at any time,
but if the grid already exists, it erases ghost cell information that
is currently stored.  Thus if the grid already exists, a
<A HREF = "balance.html">balance</A> command must be invoked to regenerate ghost
cell information before a simulation is performed.
</P>
<P>NOTE: discuss what happens on same or different # of procs, whether
should change partitioning via the <A HREF = "balance.html">balance</A> or <A HREF = "fix_balance.html">fix
balance</A> commands.
</P>
<P>IMPORTANT NOTE: Because restart files are binary, they may not be
portable to other machines.
</P>
<P>IMPORTANT NOTE: If restart on different # of procs, probalby
want to use balance command.
</P>
<P>If you restart on a different number of processors, with a gridcut
setting >= 0.0, then SPARTA will be unable to generate ghost cell
information when reformulating the grid. This is because decomposition
will be unclumped.  Using balance command will remedy this.  Can
also change the gridcut setting before doing this if desired.
</P>
<P>Similar to how restart files are written (see the
<A HREF = "write_restart.html">write_restart</A> and <A HREF = "restart.html">restart</A>
commands), the restart filename can contain two wild-card characters.
If a "*" appears in the filename, the directory is searched for all
filenames that match the pattern where "*" is replaced with a timestep
value.  The file with the largest timestep value is read in.  Thus,
this effectively means, read the latest restart file.  It's useful if
you want your script to continue a run from where it left off.  See
the <A HREF = "run.html">run</A> command and its "upto" option for how to specify
the run command so it doesn't need to be changed either.
</P>
<P>If a "%" character appears in the restart filename, SPARTA expects a
set of multiple files to exist.  The <A HREF = "restart.html">restart</A> and
<A HREF = "write_restart.html">write_restart</A> commands explain how such sets are
created.  Read_restart will first read a filename where "%" is
replaced by "base".  This file tells SPARTA how many processors
created the set and how many files are in it.  Read_restart then reads
the additional files.  For example, if the restart file was specified
as save.% when it was written, then read_restart reads the files
save.base, save.0, save.1, ... save.P-1, where P is the number of
processors that created the restart file.
</P>
<P>Note that P could be the total number of processors in the previous
simulation, or some subset of those processors, if the <I>fileper</I> or
<I>nfile</I> options were used when the restart file was written; see the
<A HREF = "restart.html">restart</A> and <A HREF = "write_restart.html">write_restart</A> commands
for details.  The processors in the current SPARTA simulation share
the work of reading these files; each reads a roughly equal subset of
the files.  The number of processors which created the set can be
different the number of processors in the current SPARTA simulation.
This can be a fast mode of input on parallel machines that support
parallel I/O.
</P>
<HR>

<P>A restart file stores only the following information about a
simulation:
</P>
<UL><LI>units
<LI>simulation box size and boundary conditions
<LI>all settings of the global command
<LI>particles with their individual attributes
<LI>particle species info
<LI>geometry of the hierarchical grid that overlays the simulation domain
<LI>geometry of all derined surface elements
<LI>current timestep number 
</UL>
<P>Basically, this means the information specified in the original input
script by these commands is saved in the restart file:
</P>
<UL><LI>units
<LI>dimension
<LI>create_box
<LI>boundary
<LI>species
<LI>create_grid or read_grid
<LI>read_surf 
</UL>
<P>No other information is stored in the restart file.  Specifically,
information about these simulation entities is NOT stored:
</P>
<UL><LI>mixtures
<LI>computes
<LI>fixes
<LI>collision model
<LI>chemistry model  (or reaction model?)
<LI>surface collision models
<LI>variables
<LI>regions
<LI>output options for stats, dump, restart files
<LI>timestep size 
</UL>
<P>Basically, this means any information specified in the original input
script by these commands needs to be re-specified in the new input
script that reads the restart file, assuming the continued simulation
needs the information:
</P>
<UL><LI><A HREF = "mixture.html">mixture</A>
<LI><A HREF = "compute.html">compute</A>
<LI><A HREF = "fix.html">fix</A>
<LI><A HREF = "collide.html">collide</A>
<LI><A HREF = "react.html">react</A>
<LI><A HREF = "surf_collide.html">surf_collide</A>
<LI><A HREF = "surf_modify.html">surf_modify</A>
<LI><A HREF = "variable.html">variable</A>
<LI><A HREF = "region.html">region</A>
<LI><A HREF = "stats_style.html">stats_style</A>
<LI><A HREF = "dump.html">dump</A>
<LI><A HREF = "restart.html">restart</A>
<LI><A HREF = "timestep.html">timestep</A> 
</UL>
<P>Things of note:
not vremax
IMPORTANT NOTE: status of time-average fixes?
assign surf collision model to global boundary or surfs
</P>
<P>Note that many commands can be used after a restart file is read, to
re-specify a setting that was stored in the restart file.  file is
read.  For example, the <A HREF = "global.html">global</A> command can be used to
reset the values of its specified keywords.
</P>
<P>NOTE: how about boundary?
</P>
<HR>

<P><B>Restrictions:</B> none
</P>
<P><B>Related commands:</B>
</P>
<P><A HREF = "read_grid.html">read_grid</A>, <A HREF = "read_surf.html">read_surf</A>,
<A HREF = "write_restart.html">write_restart</A>, <A HREF = "restart.html">restart</A>
</P>
<P><B>Default:</B> none
</P>
</HTML>
